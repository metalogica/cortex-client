"use strict";(()=>{var n=(s,e,c)=>new Promise((i,d)=>{var m=t=>{try{o(c.next(t))}catch(a){d(a)}},g=t=>{try{o(c.throw(t))}catch(a){d(a)}},o=t=>t.done?i(t.value):Promise.resolve(t.value).then(m,g);o((c=c.apply(s,e)).next())});var r=class{constructor(e){console.log("cortex client class fired",e),this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.headset=e.headset,this.ws=new WebSocket(e.url)}stream(){return n(this,null,function*(){let e=yield this._getCortexToken(),c=yield this._getSessionId({cortexToken:e}),i={id:1,jsonrpc:"2.0",method:"subscribe",params:{cortexToken:e,sessionId:c,streams:["com"]}};yield this._send({message:i})})}_send(c){return n(this,arguments,function*({message:e}){yield this.ws.send(JSON.stringify(e))})}_getCortexToken(){return n(this,null,function*(){let e={id:1,jsonrpc:"2.0",method:"authorize",params:{clientId:this.clientId,clientSecret:this.clientSecret,debit:1}}})}_getSessionId(c){return n(this,arguments,function*({cortexToken:e}){let i={id:1,jsonrpc:"2.0",method:"createSession",params:{cortexToken:e,clientId:this.clientId,clientSecret:this.clientSecret,headset:this.headset,status:"active"}}})}},l=s=>new r(s);var h=new WebSocket("wss://localhost:6868");h.addEventListener("open",()=>{let s=l({headset:"test"});console.log(s),h.send(JSON.stringify({id:1,jsonrpc:2,method:"getUserLogin"}))});console.log("main script completed.");})();
//# sourceMappingURL=index.js.map
